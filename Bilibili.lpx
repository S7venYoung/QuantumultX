#!name = å“”å“©å“”å“© â€” ç©ºé™åŠ©æ‰‹
#!desc = å•ç‹¬çš„ç©ºé™åŠ©æ‰‹ï¼ˆè·³è¿‡è§†é¢‘å†…æ’æ’­å¹¿å‘Šï¼‰
#!openUrl = https://apps.apple.com/app/id736536022
#!author = RuCu6, kokoryh, Maasea, å¯è‰ğŸ…¥
#!tag = å»å¹¿å‘Š, ç©ºé™åŠ©æ‰‹
#!system = 
#!system_version = 
#!loon_version = 3.3.5(904)
#!homepage = https://github.com/kokoryh/Sparkle
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/BilibiliPink.png
#!date = 2025-10-16 00:00

[Argument]
airborne = switch, true, false, tag = [ç©ºé™åŠ©æ‰‹]è·³è¿‡è§†é¢‘å†…æ’æ’­å¹¿å‘Š, desc = true: å¼€å¯; false: å…³é—­;
logLevel = select, "off", "error", "warn", "info", "debug", tag = æ—¥å¿—ç­‰çº§, desc = é€‰æ‹©æ—¥å¿—è¾“å‡ºç­‰çº§

[Script]
# ç©ºé™åŠ©æ‰‹ â€” æ‹¦æˆªå¹¶ä¿®æ”¹ DM è¯·æ±‚ï¼ˆè§†é¢‘å†…æ’æ’­/ç©ºé™ç›¸å…³ï¼‰ï¼Œè¯·æ±‚å¤„ç†è„šæœ¬ä½¿ç”¨ upstream çš„ JS
# æ³¨æ„ï¼šrequires-body = true ä¸” binary-body-mode = trueï¼ˆå› ä¸ºä½¿ç”¨ ProtoBufï¼‰
http-request ^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.community\.service\.dm\.v1\.DM\/DmSegMobile$ script-path = https://raw.githubusercontent.com/kokoryh/Sparkle/master/dist/bilibili.protobuf.request.js, requires-body = true, binary-body-mode = true, tag = [å“”å“©å“”å“©]ç©ºé™åŠ©æ‰‹, enable={airborne}, argument=[{logLevel}]

[MitM]
hostname = grpc.biliapi.net, app.bilibili.com